<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
<link rel="stylesheet" href="{{ url_for('static', filename='styles/styles.css') }}">

<header class="bg-dark text-white py-3 mb-4 shadow-sm">
    <div class="container d-flex flex-column flex-md-row align-items-center justify-content-between">

        <h1 class="h3 mb-2 mb-md-0 text-center text-md-start fw-bold">
            Tienda de Partituras
        </h1>
        <div class="text-center text-md-end mb-2 mb-md-0">
            {% if 'usuario_nombre' in session %}
                <span class="fw-light">Hola, <strong>{{session['usuario_nombre']}}</strong></span>
            {% else %}
                <span class="fw-light">Navegando como invitado</span>
            {% endif %}
        </div>
        <nav class="d-flex flex-wrap justify-content-center gap-2">

            <a href="/" class="btn btn-outline-light btn-sm d-flex align-items-center">
                <i class="bi bi-house-fill me-1"></i> Inicio
            </a>

            <a href="/partituras" class="btn btn-outline-light btn-sm d-flex align-items-center">
                <i class="bi bi-music-note-beamed me-1"></i> Catálogo
            </a>

            {% if 'usuario_id' not in session %}
                <a href="/login" class="btn btn-outline-light btn-sm d-flex align-items-center">
                    <i class="bi bi-person-fill-up me-1"></i> Iniciar sesión
                </a>

                <a href="/signup" class="btn btn-outline-light btn-sm d-flex align-items-center">
                    <i class="bi bi-person-plus-fill me-1"></i> Registrarse
                </a>

            {% else %}
                <a href="/upload" class="btn btn-outline-light btn-sm d-flex align-items-center">
                    <i class="bi bi-upload me-1"></i> Subir
                </a>

                <a href="/carrito" class="btn btn-outline-light btn-sm position-relative d-flex align-items-center">
                    <i class="bi bi-cart3"></i>
                    {% if session.get('carrito') %}
                        <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                            {{ session['carrito']|length }}
                        </span>
                    {% endif %}
                </a>

                <a href="/logout" class="btn btn-outline-light btn-sm d-flex align-items-center">
                    <i class="bi bi-person-fill-down me-1"></i> Cerrar sesión
                </a>
            {% endif %}

            <a href="{{url_for('perfil')}}"
               class="d-flex align-items-center justify-content-center border border-light rounded-circle overflow-hidden"
               style="width: 42px; height: 42px;">
                <img src="{{ url_for('static', filename=session.get('usuario_foto', 'images/perfiles/default_profile.png')) }}"
                     alt="Foto de perfil"
                     style="width: 100%; height: 100%; object-fit: cover;">
            </a>

        </nav>

    </div>
</header>
